const autoprefixer = require('autoprefixer');
const purgecss = require('@fullhuman/postcss-purgecss');
const whitelister = require('purgecss-whitelister');

module.exports = {
  plugins: [
    autoprefixer(),
    purgecss({
      content: [
        './layouts/**/*.html',
        './content/**/*.md',
      ],
      safelist: [
        'lazyloaded',
        'lazyload',
        'blur-up',
        'table',
        'thead',
        'tbody',
        'tr',
        'th',
        'td',
        'h5',
        'alert-link',
        'container-xxl',
        'container-fluid',
        'offcanvas-backdrop',
        'img-fluid',
        'figcaption',
        'hero-home',
        'hero-home__bg',
        'hero-home__overlay',
        'hero-home__content',
        'quote-section',
        'quote-section__inner',
        'quote-section__kicker',
        'quote-section__title',
        'quote-section__lead',
        'quote-section__body',
        'quote-section__cta',
        'issues-section',
        'issues-section__bg',
        'issues-section__header',
        'issues-section__title',
        'issues-section__lead',
        'issues-section__grid',
        'issues-section__cta',
        'issues-card',
        'issues-card__title',
        'issues-card__link',
        'section-title',
        'section-title__underline',
        'section-open-collective',
        'bg-green',
        'endorsement-logo',
        'endorsements-section',
        'endorsements-section__header',
        'endorsements-section__kicker',
        'endorsements-section__title',
        'endorsements-section__lead',
        'endorsements-section__logos',
        'endorsements-section__card',
        'endorsements-section__quote',
        'endorsements-section__invite',
        'endorsements-section__link',
        'endorsements-section__cta',
        'footer__inner',
        'footer__logo',
        'footer__cta',
        'footer__legal',
        'footer__tagline',
        'footer__copyright',
        'footer__social',
        'footer__social-link',
        'yardsign-section',
        'yardsign-section__kicker',
        'yardsign-section__title',
        'yardsign-section__lead',
        'yardsign-section__img',
        'yardsign-mini',
        'yardsign-mini__inner',
        'yardsign-mini__title',
        'yardsign-mini__text',
        'yardsign-mini__cta',
        'yardsign-mini__img',
        'video-embed',
        'yardsign-card',
        'endorse-card__img',
        'order-content-first',
        'text-green',
        'text-orange',
        'text-muted',
        ...whitelister([
          './assets/scss/components/_alerts.scss',
          './assets/scss/components/_buttons.scss',
          './assets/scss/components/_code.scss',
          './assets/scss/components/_diagrams.scss',
          './assets/scss/components/_syntax.scss',
          './assets/scss/components/_search.scss',
          './assets/scss/common/_dark.scss',
          './assets/scss/layouts/_home.scss',
          './node_modules/bootstrap/scss/_dropdown.scss',
          './node_modules/katex/dist/katex.css',
        ]),
      ],
    }),
  ],
}
